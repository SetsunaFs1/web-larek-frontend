# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

**Цель проекта:** реализация интернет-магазина с товарами для веб-разработчиков.
В рамках проекта выполнены следующие задачи:
- Спроектировала собственную реализацию MVP-архитектуры веб-приложения;
- Реализовала базовый код приложения;
-  Реализовала модель данных и подключила API;
- Реализовала компоненты интерфейса;
- Реализовала состояния экранов.
- 
**Результат:** реализован процесс выбора и покупки товаров с помощью ООП.

**Структура проекта:**
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

**Важные файлы:**
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения
Код приложения разделен на слои согласно парадигме MVP:

- слой представления, отвечает за отображение данных на странице.
- слой данных, отвечает за хранение и изменение данных.
- презентер, отвечает за связь представления и данных.

## Описание базовых классов
Класс Api отвечает за работу API. Содержит в себе базовую логику отправки запросов на сервер. Его функции: GET и POST запросы.

Класс EventEmitter обеспечивает работу брокера событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

Класс Component - класс компонентов представления. Предназначен для создания компонентов пользовательского интерфейса. Работает с HTML-элементами.
Конструктор принимает контейнер, в который будет рендериться компонент.
Методы класса:
toggleClass - переключение класса элемента (отображение модальных окон).
protected setText - установка текстового содержимого элемента.
protected setImage - установка картинки элемента.
render - отображение компонента.

Класс View - дочерний компонент класса Component, расширенный EventEmitter'ом, генерацией событий.
Конструктор принимает DOM-элемент контейнер.

## Слой данных

Класс AppData отвечает за хранение данных. Обрабатывает действия пользователя.
Методы:
setItems - устанавливает список карточек товаров.
setPreview - устанавливает предпросмотр карточки товара.
addToBasket - добавляет товар в корзину.
inBasket - проверяет, есть ли данный продукт в корзине.
setPaymentMethod - возвращает способ оплаты.
removeFromBasket - удаляет товар из корзины.
clearBasket - очищает корзину.
setOrderField - устанавливает значение поля в заказе.
validateOrder - проверяет валидность данных заказа.

Класс WebLarekApi отправляет информацию на сервер и возвращает ответ сервера. Наследуется от класса Api.
Конструктор: constructor(cdn: string, baseUrl: string, options?: RequestInit)
Методы класса:
getProductList - получение списка всех карточек с сервера.
getProductItem - получение данных карточки по айди.
orderProducts - возврат данных по заказу.

Класс Form для работы с формами. Содержит конструктор и методы, отвечающие за работу с валидностью и ошибками при заполнении форм. Наследуется от View. 
constructor(container: HTMLElement,events: IEvents)
onInputChange - обрабатывает валидность и ошибки.
render - рендер страницы.

## Слой отображения

Класс Modal отвечает за отображение модального окна. Открытие, закрытие и рендер модального окна. Наследуется от View.
constructor (events: IEvents, container: HTMLElement).
Методы:
content - собирает содержимое модального окна.
open - открывает модальное окно.
close - закрывает модальное окно.
render - создает и открывает модальное окно с собранным содержимым.

Класс Card отвечает за отображение информации о товаре карточках на главной странице, в модальном окне с подробной информацией о товаре и пункте списка в корзине. Наследуется от Component.
Имеет конструктор и методы:
toggle - переключает класс.
set/get id - управляет индификатором карточки.
set/get title - управляет названием товара.
set/get category - управляет категорией и ее цветом.
set/get price - управляет ценой товара.
set image - устанавливает изображение товара.
set description - устанавливает описание товара.
set button - устанавливает текст кнопки.

Класс Basket отвечает за отображение корзины с товарами в модальном окне.
Конструктор наследуется от класса View, а также принимает экземпляр класса EventEmmiter
Методы:
set items - заполняет список товаров элементами.
set total. - устанавливает контент в элемент _total.

Класс Success отвечает за вывод информации о успешном оформлении заказа в модальном окне. Наследуется от Component.
Конструктор принимает объект с обработчиком клика кнопки закрытия окна подтверждения успешного заказа.
Метод:
set total - устанавливает тект сообщения о списании стоимости товаров.

Класс Contacts реализует контент модального окна с данными о контактах пользователя. Является дочерним от класса Form.
Методы:
set phone - устанавливает данные в инпут phone.
set email - устанавливает данные в инпут email.

Класс Order реализует контент модального окна с данными о оплате и адресе доставки заказа. Является дочерним от класса Form.
Методы:
set adress - устанавливает адрес.
set payment - устанавливает значение оплаты.

## Описание событий
- 'items:changed' — изменение товара.
- 'card:select' — выбор товара.
- 'preview:change' — просмотр товара в модальном окне.
- 'basket:change' — изменение корзины.
- 'basket:open' — открытие корзины.
- 'order:open' — открытие формы с выбором оплаты.
- 'order:submit' — открытие формы с контактами.
- /^order\..*:change/ — изменение поля формы доставки.
- /^contacts\..*:change/ — изменение поля формы контактов.
- 'order:ready' — форма валидна и готова к отправке.
- 'formErrors:change' — возвращение ошибок формы.
- 'modal:open' — открытие модалки.
- 'modal:close' — закрытие модалки.
- 'contacts:submit' — отправка формы.
